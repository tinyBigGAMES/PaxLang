module exe control_flow;

// Test control flow statements

var
  i: int32;
  sum: int32;
  n: int32;
  found: boolean;

begin
  // If-then
  n := 10;
  if n > 5 then
    sum := 1;
  end;
  
  // If-then-else
  if n < 5 then
    sum := 0;
  else
    sum := 1;
  end;
  
  // Nested if
  if n > 0 then
    if n < 100 then
      sum := n;
    end;
  end;
  
  // While loop
  sum := 0;
  i := 1;
  while i <= 10 do
    sum := sum + i;
    i := i + 1;
  end;
  // sum should be 55
  
  // For loop (to)
  sum := 0;
  for i := 1 to 10 do
    sum := sum + i;
  end;
  // sum should be 55
  
  // For loop (downto)
  sum := 0;
  for i := 10 downto 1 do
    sum := sum + i;
  end;
  // sum should be 55
  
  // Repeat-until
  sum := 0;
  i := 1;
  repeat
    sum := sum + i;
    i := i + 1;
  until i > 10;
  // sum should be 55
  
  // Case statement
  n := 2;
  case n of
    1: sum := 10;
    2: sum := 20;
    3: sum := 30;
  else
    sum := 0;
  end;
  // sum should be 20
  
  // Case with ranges
  n := 5;
  case n of
    1..3: sum := 1;
    4..6: sum := 2;
    7..9: sum := 3;
  else
    sum := 0;
  end;
  // sum should be 2
  
end.
